<nz-spin nzTip="Data Loading..." [nzSpinning]="isLoading">
  <nz-spin nzTip="Saving..." [nzSpinning]="saveLoading">
    <div style="height: 100%;">
      <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()">
        <nz-anchor [nzShowInkInFixed]="false" >
          <nz-page-header>
            <nz-page-header-title>Ante Mortem</nz-page-header-title>
            <nz-page-header-extra>
              <!-- <button nz-button (click)="draft(); $event.preventDefault();">
                <i nz-icon nzType="folder-open"></i>
                Save as Draft
              </button> -->
              <button nz-button nzType="primary" (click)="cancel(); $event.preventDefault();" nzDanger>
                <i nz-icon nzType="close"></i>
                Cancel
              </button>
              <button nz-button nzType="primary" [disabled]="!validateForm.valid || validateForm.value.details.length == 0">
                <i nz-icon nzType="save"></i>
                {{buttonTitle}}
              </button>
            </nz-page-header-extra>
          </nz-page-header>
        </nz-anchor>

        <nz-tabset nzType="card">
          <nz-tab [nzTitle]="TransactionForm">

            <div nz-row>
              <div nz-col nzSpan="24">

                <nz-card nzType="inner" nzTitle="Ante Mortem Setup">
                  
                  <div nz-row>
                    <div nz-col [nzSpan]="12">

                      <nz-form-item>
                        <nz-form-label [nzSm]="8" [nzXs]="12" nzRequired>Client</nz-form-label>
                        <nz-form-control  [nzSm]="12" [nzXs]="24"  >
                          <nz-input-group nzSearch  [nzAddOnAfter]="browseButton">
                            <input type="text" [readonly]="true" nz-input formControlName="client_name" style="text-transform: uppercase;" placeholder=""  />
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>
      
                      <nz-form-item>
                        <nz-form-label [nzSm]="8" [nzXs]="12">Code</nz-form-label>
                        <nz-form-control  [nzSm]="12" [nzXs]="24"  >
                          <nz-input-group>
                            <input type="text" nz-input formControlName="code"/>
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>
      
                      <nz-form-item>
                        <nz-form-label [nzSm]="8" [nzXs]="12">Species</nz-form-label>
                        <nz-form-control  [nzSm]="12" [nzXs]="24"  >
                          <nz-input-group>
                            <input type="text" nz-input formControlName="species"/>
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>

                      <nz-form-item>
                        <nz-form-label [nzSm]="8" [nzXs]="12">Species</nz-form-label>
                        <nz-form-control  [nzSm]="12" [nzXs]="24"  >
                          <nz-input-group>
                            <nz-select formControlName="sex" nzAllowClear nzPlaceHolder="Select a gender" style="width: 100%;">
                              <nz-option nzLabel="Male" nzValue="Male"></nz-option>
                              <nz-option nzLabel="Female" nzValue="Female"></nz-option>
                            </nz-select>
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>
      
                      <nz-form-item>
                        <nz-form-label [nzSm]="8" [nzXs]="12">Color</nz-form-label>
                        <nz-form-control  [nzSm]="12" [nzXs]="24"  >
                          <nz-input-group>
                            <input type="text" nz-input formControlName="species"/>
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>

                      <nz-form-item>
                        <nz-form-label [nzSm]="8" [nzXs]="12">Live Weight</nz-form-label>
                        <nz-form-control  [nzSm]="12" [nzXs]="24"  >
                          <nz-input-group>
                            <input type="text" nz-input formControlName="live_weight"/>
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>                          

                    </div>
                    <div nz-col [nzSpan]="12">

                      <nz-form-item>
                        <nz-form-label [nzSm]="8" [nzXs]="12">Time Arrival</nz-form-label>
                        <nz-form-control  [nzSm]="12" [nzXs]="24"  >
                          <nz-input-group>
                            <nz-time-picker formControlName="time_arrival" nzFormat="HH:mm"></nz-time-picker>
                            <!-- <input type="text" nz-input formControlName="time_arrival"/> -->
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>

                      <nz-form-item>
                        <nz-form-label [nzSm]="8" [nzXs]="12">Time Received</nz-form-label>
                        <nz-form-control  [nzSm]="12" [nzXs]="24"  >
                          <nz-input-group>
                            <nz-time-picker formControlName="time_received" nzFormat="HH:mm"></nz-time-picker>
                            <!-- <input type="text" nz-input formControlName="time_received"/> -->
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>

                      <nz-form-item>
                        <nz-form-label [nzSm]="8" [nzXs]="12">Remarks</nz-form-label>
                        <nz-form-control  [nzSm]="12" [nzXs]="24"  >
                          <!-- <p style="font-weight: 500;">Remarks:</p> -->
                          <nz-input-group style="width: 100%;">
                            <textarea type="text" rows="4" nz-input formControlName="remarks"></textarea>
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>

                    </div>
                  </div>

                </nz-card>

              </div>
            </div>

          </nz-tab>
        </nz-tabset>

      </form>
    </div>
  </nz-spin>
</nz-spin>

<ng-template #TransactionForm>
  <i nz-icon nzType="container" nzTheme="outline"></i>
  Transaction Form
</ng-template>

<ng-template #browseButton>
  <button nz-button nzType="primary" nzSearch (click)="openBrowse();$event.preventDefault()">Browse</button>
</ng-template>