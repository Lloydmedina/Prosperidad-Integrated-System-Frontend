<nz-spin nzTip="Data Loading..." [nzSpinning]="isLoading">
  <nz-spin nzTip="Saving..." [nzSpinning]="saveLoading">
    <div style="height: 100%;">
      <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()">
        <nz-anchor [nzShowInkInFixed]="false" >
          <nz-page-header>
            <nz-page-header-title>OSCA Intake Setup</nz-page-header-title>
            <nz-page-header-extra>
              <!-- <button nz-button (click)="draft(); $event.preventDefault();">
                <i nz-icon nzType="folder-open"></i>
                Save as Draft
              </button> -->
              <button nz-button nzType="primary" (click)="cancel(); $event.preventDefault();" nzDanger>
                <i nz-icon nzType="close"></i>
                Cancel
              </button>
              <button nz-button nzType="primary" [disabled]="!validateForm.valid">
                <i nz-icon nzType="save"></i>
                {{buttonTitle}}
              </button>
            </nz-page-header-extra>
          </nz-page-header>
        </nz-anchor>

        <nz-tabset nzType="card">
          <nz-tab [nzTitle]="TransactionForm">
            <nz-card nzType="inner" nzTitle="I. Identifying Information">

              <div nz-row [nzGutter]="24">
                <div nz-col [nzSpan]="4">
                  <nz-upload
                  class="avatar-uploader"
                  nzAction="https://www.mocky.io/v2/5cc8019d300000980a055e76"
                  nzName="avatar"
                  nzListType="picture-card"
                  [nzShowUploadList]="false"
                  [nzBeforeUpload]="beforeUpload"
                  (nzChange)="handleChange($event)"
                >
                  <ng-container *ngIf="!avatarUrl">
                    <i class="upload-icon" nz-icon [nzType]="loading ? 'loading' : 'plus'"></i>
                    <div class="ant-upload-text">Upload</div>
                  </ng-container>
                  <img *ngIf="avatarUrl" [src]="avatarUrl" style="width: 100%" />
                </nz-upload>
                <span style="font-style: italic;">(
                  <span style="font-weight: 500;">Note</span>: Uploading photo is optional)
                </span>
                </div>
                <div nz-col [nzSpan]="20">
                  <nz-input-group>
                    <p class="label" style="color: darkblue;"><span style="color: red;">* </span>Full Name :</p>
                    <div nz-row [nzGutter]="8">
                      <div nz-col nzSpan="3">
                        
                        <nz-form-item>
                          <nz-form-control nzErrorTip="Please input prefix!" nzExtra="(Prefix)">
                            <nz-input-group>
                              <input class="readOnly" [readOnly]="true" formControlName="prefix" nz-input placeholder="Prefix" />
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col nzSpan="6">
                        <nz-form-item>
                          <nz-form-control nzErrorTip="Please input your firstname!" nzExtra="(First Name)">
                            <nz-input-group>
                              <input class="readOnly" [readOnly]="true" formControlName="first_name" nz-input placeholder="First Name" />
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col nzSpan="6">
                        <nz-form-item>
                          <nz-form-control nzErrorTip="Please input your middle name!" nzExtra="(Middle Name)">
                            <nz-input-group>
                              <input class="readOnly" [readOnly]="true" formControlName="middle_name" nz-input placeholder="Middle Name" />
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col nzSpan="6">
                        <nz-form-item>
                          <nz-form-control nzErrorTip="Please input your last name!" nzExtra="(Last Name)">
                            <nz-input-group>
                              <input class="readOnly" [readOnly]="true" formControlName="last_name" nz-input placeholder="Last Name" />
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col nzSpan="3">
                        <nz-form-item>
                          <nz-form-control nzErrorTip="Please input suffix!" nzExtra="(Suffix)">
                            <nz-input-group>
                              <input class="readOnly" [readOnly]="true" formControlName="suffix" nz-input placeholder="Suffix" />
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                    </div>
                  </nz-input-group>

                  <nz-input-group>
                    <p class="label"style="color: darkblue;"><span style="color: red;">* </span>Address :</p>
                    <div nz-row [nzGutter]="8">
                      <div nz-col nzSpan="6">
                        <nz-form-item>
                          <nz-form-control nzErrorTip="Please select province!" nzExtra="(Province)">
                            <nz-input-group>
                              <nz-select style="width: 100%;" formControlName="province_id" nzAllowClear nzPlaceHolder="Select a province">
                                <nz-option *ngFor="let list of provinceDropdown" nzLabel="{{list.province_name}}" nzValue="{{list.province_id}}"></nz-option>
                              </nz-select>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col nzSpan="6">
                        <nz-form-item>
                          <nz-form-control nzErrorTip="Please select city/municipality!" nzExtra="(City/Municipality)">
                            <nz-input-group>
                              <nz-select style="width: 100%;" formControlName="citmun_id" nzPlaceHolder="Select a city/municipality">
                                <nz-option *ngFor="let list of citymunDropdown" nzLabel="{{list.city_mun_name}}" nzValue="{{list.city_mun_id}}"></nz-option>
                              </nz-select>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col nzSpan="6">
                        <nz-form-item>
                          <nz-form-control nzErrorTip="Please select barangay!" nzExtra="(Barangay)">
                            <nz-input-group>
                              <nz-select style="width: 100%;" formControlName="barangay_id" nzPlaceHolder="Select a barangay">
                                <nz-option type="number" *ngFor="let list of barangayDropdown" nzLabel="{{list.brgy_name}}" nzValue="{{list.brgy_id}}"></nz-option>
                              </nz-select>
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col nzSpan="6">
                        <nz-form-item>
                          <nz-form-control nzErrorTip="Please input street!" nzExtra="(Street)">
                            <nz-input-group>
                              <input class="readOnly" [readOnly]="true" formControlName="street" nz-input placeholder="Street" />
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                    </div>
                  </nz-input-group>
                </div>
              </div>

              <nz-divider></nz-divider>

              <div nz-row [nzGutter]="24">
                <div nz-col [nzSpan]="8">
                  <nz-form-item>
                    <!-- <nz-form-label [nzSpan]="5">Date of Birth</nz-form-label> -->
                    <nz-form-control nzErrorTip="Please input date!">
                      <p class="label"style="color: darkblue;"><span style="color: red;">* </span>Date of Birth :</p>
                      <nz-input-group>
                        <nz-date-picker style="width: 100%;" formControlName="birth_date" [(ngModel)]="date"></nz-date-picker>
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
                <div nz-col [nzSpan]="8">
                  <nz-form-item>
                    <!-- <nz-form-label [nzSpan]="5">Birth Place</nz-form-label> -->
                    <nz-form-control nzErrorTip="Please input birth place!">
                      <p class="label" style="font-style: normal !important;">Birth Place :</p>
                      <nz-input-group>
                        <input class="readOnly" [readOnly]="true" formControlName="place_of_birth" nz-input placeholder="Place of Birth" />
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
                <div nz-col [nzSpan]="8">
                  <nz-form-item>
                    <!-- <nz-form-label [nzSpan]="5">Civil Status</nz-form-label> -->
                    <nz-form-control nzErrorTip="Please select civil status!">
                      <p class="label" style="font-style: normal !important;">Civil Status :</p>
                      <nz-input-group>
                        <nz-select style="width: 100%;" formControlName="civil_status_id" nzPlaceHolder="Select a civil status">
                          <nz-option *ngFor="let list of civilStatusDropdown" nzLabel="{{list.civil_status_name}}" nzValue="{{list.civil_status_id}}"></nz-option>
                        </nz-select>
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
              </div>

              <div nz-row [nzGutter]="24">
                <div nz-col [nzSpan]="8">
                  <nz-form-item>
                    <!-- <nz-form-label [nzSpan]="5">Sex</nz-form-label> -->
                    <nz-form-control nzErrorTip="Please select gender!">
                      <p class="label" style="color: darkblue;"><span style="color: red;">* </span>Sex :</p>
                      <nz-input-group>
                        <nz-select style="width: 100%;" formControlName="gender_id" nzPlaceHolder="Select a gender">
                          <nz-option *ngFor="let list of genderDropdown" nzLabel="{{list.gender_name}}" nzValue="{{list.gender_id}}"></nz-option>
                        </nz-select>
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
                <div nz-col [nzSpan]="8">
                  <nz-form-item>
                    <!-- <nz-form-label [nzSpan]="5">Age</nz-form-label> -->
                    <nz-form-control nzErrorTip="Please input age!">
                      <p class="label" style="font-style: normal !important;">Age :</p>
                      <nz-input-group>
                        <input class="readOnly" [readOnly]="true" formControlName="age" nz-input placeholder="Age" />
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
                <div nz-col [nzSpan]="8">
                  <nz-form-item>
                    <!-- <nz-form-label [nzSpan]="5">Religion</nz-form-label> -->
                    <nz-form-control nzErrorTip="Please input religion!">
                      <p class="label" style="font-style: normal !important;">Religion :</p>
                      <nz-input-group>
                        <input class="readOnly" [readOnly]="true" formControlName="religion" nz-input placeholder="Religion" />
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
              </div>

              <div nz-row [nzGutter]="24">
                <div nz-col [nzSpan]="8">
                  <nz-form-item>
                    <!-- <nz-form-label [nzSpan]="5">Education</nz-form-label> -->
                    <nz-form-control nzErrorTip="Please input educational attainment!" nzExtra="(Educational Attainment)">
                      <p class="label" style="font-style: normal !important;">Education :</p>
                      <nz-input-group>
                        <nz-select style="width: 100%;" formControlName="educational_attainment" nzPlaceHolder="Select educational attainment">
                          <nz-option *ngFor="let list of educationalTypeDropdown" nzLabel="{{list.educational_name}}" nzValue="{{list.id}}"></nz-option>
                        </nz-select>
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
                <div nz-col [nzSpan]="8">
                  <nz-form-item>
                    <!-- <nz-form-label [nzSpan]="5">Occupation</nz-form-label> -->
                    <nz-form-control nzErrorTip="Please input occupation!">
                      <p class="label" style="font-style: normal !important;">Occupation :</p>
                      <nz-input-group>
                        <input class="readOnly" [readOnly]="true" formControlName="occupation" nz-input placeholder="Profession" />
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
                <div nz-col [nzSpan]="8">
                  <nz-form-item>
                    <!-- <nz-form-label [nzSpan]="5">Income</nz-form-label> -->
                    <nz-form-control nzErrorTip="Please input citizenship!">
                      <p class="label" style="font-style: normal !important;">Citizenship :</p>
                      <nz-input-group>
                        <input class="readOnly" [readOnly]="true" formControlName="citizenship" nz-input placeholder="Citizenship" />
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
              </div>

              <nz-divider></nz-divider>

              <div nz-row [nzGutter]="24">
                <div nz-col [nzSpan]="8">
                  <nz-form-item>
                    <!-- <nz-form-label [nzSpan]="5">Income</nz-form-label> -->
                    <nz-form-control nzErrorTip="Please input citizenship!">
                      <p class="label" style="font-style: normal !important;">Father's Name :</p>
                      <nz-input-group>
                        <input formControlName="fathers_name" nz-input placeholder="Father's Name" />
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>

                <div nz-col [nzSpan]="8">
                  <nz-form-item>
                    <!-- <nz-form-label [nzSpan]="5">Income</nz-form-label> -->
                    <nz-form-control nzErrorTip="Please input citizenship!">
                      <p class="label" style="font-style: normal !important;">Mother's Name :</p>
                      <nz-input-group>
                        <input formControlName="mothers_name" nz-input placeholder="Mother's Name" />
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
              </div>

              <div nz-row [nzGutter]="24">
                <div nz-col nzSpan="8">
                  <nz-form-item>
                    <nz-form-control nzErrorTip="Please select living arrangement!">
                      <p class="label" style="color: darkblue;"><span style="color: red;">* </span>Living Arrangement :</p>
                      <nz-input-group>
                        <nz-radio-group (ngModelChange)="selectedLivingArrangement($event)" [(ngModel)]="radioValue" formControlName="living_arrangement_id">
                          <label *ngFor="let list of livingArrangement" nz-radio nzValue="{{list.id}}">{{list.name}}</label>
                        </nz-radio-group>
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
                <div nz-col nzSpan="16" *ngIf="hideSpecifyOthers">
                  <nz-form-item>
                    <nz-form-control nzErrorTip="Please input specify others!">
                      <p class="label">If Others Please Specify :</p>
                      <nz-input-group>
                        <textarea formControlName="specify_living_others" rows="4" nz-input placeholder="Specify others"></textarea>
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </div>
              </div>

              <div nz-row [nzGutter]="24">
                <div nz-col [nzSpan]="12">
                  <nz-card nzType="inner" nzTitle="Affiliation/Group :" style="margin-top: 10px; height: 100%;">
                  
                    <div nz-row [nzGutter]="24">
                      <div nz-col [nzSpan]="12">
                        <nz-form-item>
                          <!-- <nz-form-label [nzSpan]="5">Income</nz-form-label> -->
                          <nz-form-control>
                            <nz-input-group>
                              <label (ngModelChange)="checkedListahananBox($event)" formControlName="listahanan" nz-checkbox [(ngModel)]="checkedListahanan" style="font-weight: 500;">Listahanan</label> 
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>

                      <div nz-col [nzSpan]="12" *ngIf="specifyListahananHide">
                        <nz-form-item>
                          <nz-form-control nzErrorTip="Please input specify household no!">
                            <p class="label">Please specify household no :</p>
                            <nz-input-group>
                              <input formControlName="specify_listahanan" nz-input placeholder="Specify household no">
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                    </div>  

                    <div nz-row [nzGutter]="24">
                      <div nz-col [nzSpan]="12">
                        <nz-form-item>
                          <!-- <nz-form-label [nzSpan]="5">Income</nz-form-label> -->
                          <nz-form-control>
                            <nz-input-group>
                              <label formControlName="fourps_beneficiary" nz-checkbox [(ngModel)]="checkedPantawid" style="font-weight: 500;">Pantawid Beneficiary</label> 
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                    </div> 

                    <div nz-row [nzGutter]="24">
                      <div nz-col [nzSpan]="12">
                        <nz-form-item>
                          <!-- <nz-form-label [nzSpan]="5">Income</nz-form-label> -->
                          <nz-form-control>
                            <nz-input-group>
                              <label formControlName="senior_citizen_organization" nz-checkbox [(ngModel)]="checkedSCOrganization" style="font-weight: 500;">Senior Citizen Organization</label> 
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                    </div>

                    <div nz-row [nzGutter]="24">
                      <div nz-col [nzSpan]="12">
                        <nz-form-item>
                          <!-- <nz-form-label [nzSpan]="5">Income</nz-form-label> -->
                          <nz-form-control>
                            <nz-input-group>
                              <label (ngModelChange)="checkedIPBox($event)" formControlName="ip" nz-checkbox [(ngModel)]="checkedIP" style="font-weight: 500;">Indigenous People</label> 
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>

                      <div nz-col [nzSpan]="12" *ngIf="specifyIPHide">
                        <nz-form-item>
                          <nz-form-control nzErrorTip="Please input specify!">
                            <p class="label">Please specify :</p>
                            <nz-input-group>
                              <input formControlName="specify_ip" nz-input placeholder="Please specify">
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                    </div> 

                    <div nz-row [nzGutter]="24">
                      <div nz-col [nzSpan]="12">
                        <nz-form-item>
                          <!-- <nz-form-label [nzSpan]="5">Income</nz-form-label> -->
                          <nz-form-control>
                            <nz-input-group>
                              <label (ngModelChange)="checkedOtherBox($event)" formControlName="other" nz-checkbox [(ngModel)]="checkedOther" style="font-weight: 500;">Other</label> 
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>

                      <div nz-col [nzSpan]="12" *ngIf="specifyOtherHide">
                        <nz-form-item>
                          <nz-form-control nzErrorTip="Please input specify!">
                            <p class="label">Please specify :</p>
                            <nz-input-group>
                              <input formControlName="specify_other" nz-input placeholder="Please specify">
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                    </div> 
                  
                  </nz-card>
                </div>

                <div nz-col [nzSpan]="12">
                  <nz-card nzType="inner" nzTitle="ID Number :" style="margin-top: 10px; height: 100%;">
                  
                    <div nz-row [nzGutter]="24">
                      <div nz-col [nzSpan]="12">
                        <nz-form-item>
                          <!-- <nz-form-label [nzSpan]="5">Income</nz-form-label> -->
                          <nz-form-control nzErrorTip="Please input osca no!">
                            <p class="label">OSCA No :</p>
                            <nz-input-group>
                              <input formControlName="osca_no" nz-input placeholder="OSCA" />
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>

                      <div nz-col [nzSpan]="12">
                        <nz-form-item>
                          <!-- <nz-form-label [nzSpan]="5">Income</nz-form-label> -->
                          <nz-form-control nzErrorTip="Please input tin no!">
                            <p class="label">TIN No :</p>
                            <nz-input-group>
                              <input formControlName="tin_no" nz-input placeholder="TIN" />
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>

                      <div nz-col [nzSpan]="12">
                        <nz-form-item>
                          <!-- <nz-form-label [nzSpan]="5">Income</nz-form-label> -->
                          <nz-form-control nzErrorTip="Please input gsis no!">
                            <p class="label">GSIS No :</p>
                            <nz-input-group>
                              <input formControlName="gsis_no" nz-input placeholder="GSIS" />
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>

                      <div nz-col [nzSpan]="12">
                        <nz-form-item>
                          <!-- <nz-form-label [nzSpan]="5">Income</nz-form-label> -->
                          <nz-form-control nzErrorTip="Please input sss no!">
                            <p class="label">SSS No :</p>
                            <nz-input-group>
                              <input formControlName="sss_no" nz-input placeholder="SSS" />
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>

                      <div nz-col [nzSpan]="12">
                        <nz-form-item>
                          <!-- <nz-form-label [nzSpan]="5">Income</nz-form-label> -->
                          <nz-form-control nzErrorTip="Please input philhealth no!">
                            <p class="label">PhilHealth No :</p>
                            <nz-input-group>
                              <input formControlName="philhealth_no" nz-input placeholder="PhilHealth" />
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>

                      <div nz-col [nzSpan]="12">
                        <nz-form-item>
                          <!-- <nz-form-label [nzSpan]="5">Income</nz-form-label> -->
                          <nz-form-control nzErrorTip="Please input others!">
                            <p class="label">Others :</p>
                            <nz-input-group>
                              <input formControlName="others_no" nz-input placeholder="Others" />
                            </nz-input-group>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                    </div>

                  </nz-card>
                </div>
              </div>

            </nz-card>

            <nz-card nzType="inner" nzTitle="II. Family Composition" style="margin-top: 10px;">
              <nz-table [nzShowPagination]="false" style="border: 1px solid #f1f1f1;" formArrayName="details" [nzData]="dataDisplay" [nzTitle]="BrowsePerson" nzBordered #basicTable nzSize="small" nzShowSizeChanger>
                <thead>
                  <tr>
                    <th nzWidth="3%">No</th>
                    <th>Name</th>
                    <th>Relation to Member</th>
                    <th>Age</th>
                    <th>Civil Status</th>
                    <th>Occupation</th>
                    <th>Income</th>
                    <th nzWidth="3%">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let quantity of quantities().controls; let i=index" [formGroupName]="i">
                    <td>{{i+1}}.</td>
                    <td><input class="readOnly" [readOnly]="true" formControlName="full_name" nz-input placeholder="Full Name" nzBorderless /></td>
                    <td>
                      <nz-select style="width: 100%;" formControlName="relation" nzPlaceHolder="Select relation to member">
                        <nz-option nzLabel="Father" nzValue="Father"></nz-option>
                        <nz-option nzLabel="Mother" nzValue="Mother"></nz-option>
                        <nz-option nzLabel="Brother" nzValue="Brother"></nz-option>
                        <nz-option nzLabel="Sister" nzValue="Sister"></nz-option>
                      </nz-select>
                    </td>
                    <td><input class="readOnly" [readOnly]="true" formControlName="age" nz-input placeholder="Age" nzBorderless /></td>
                    <td><input class="readOnly" [readOnly]="true" formControlName="civil_status_name" nz-input placeholder="Civil Status" nzBorderless /></td>
                    <td><input class="readOnly" [readOnly]="true" formControlName="occupational_skills" nz-input placeholder="Occupation Skills" /></td>
                    <td><input [id]="incomeAmountDetails[i]" style="text-align: right;" formControlName="occupation_income" localeCurrencyInput [allowNegative]="false" [currencyCode]="' '" [value]="incomeAmount[i]" (ngModelChange)="updateIncome()" nz-input placeholder="Enter income" /></td>
                    <td>
                      <button nz-tooltip nzTooltipTitle="Delete" class="actionDelete" (click)="removeQuantity(i); $event.preventDefault();" nz-button nzType="text"><i nz-icon nzType="delete" nzTheme="outline"></i></button>
                    </td> 
                  </tr>
                </tbody>
                <tfoot>
                  <tr>
                    <td style="text-align: right;" colspan="6"><b>TOTAL FAMILY INCOME:</b></td>
                    <td style="text-align: right;"><b>&#8369; {{totalIncome | number: '1.2-2'}}</b></td>
                    <td></td>
                  </tr>
                </tfoot>
                <ng-template #BrowsePerson>
                  <div style="text-align-last: end;">
                    <button (click)="openBrowseDrawer(); $event.preventDefault();" nz-button nzType="default">
                      <i nz-icon nzType="user-add" nzTheme="outline"></i>
                      Browse Person
                    </button>
                  </div>
                </ng-template>
                
              </nz-table>
            </nz-card>
          </nz-tab>
          <nz-tab [nzTitle]="Details">

            <div nz-row [nzGutter]="24">
              <div nz-col [nzSpan]="24">

                <nz-card nzType="inner" nzTitle="III. Economic Status">
                  <div nz-row [nzGutter]="24">
                    <div nz-col [nzSpan]="8">
                      <nz-form-item>
                        <nz-form-control>
                          <nz-input-group>
                            <label (ngModelChange)="checkedPensionerBox($event)" formControlName="pensioner" nz-checkbox [(ngModel)]="checkedPensioner" style="font-weight: 500;">Pensioner?</label> 
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>
                    </div>
                    <div nz-col [nzSpan]="8" *ngIf="howmuchHide">
                      <nz-form-item>
                        <nz-form-control nzErrorTip="Please input pension amount!">
                          <p class="label">If yes, how much? :</p>
                          <nz-input-group>
                            <input formControlName="pensioner_amount" localeCurrencyInput [allowNegative]="false" [currencyCode]="' '" nz-input placeholder="0.00">
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>
                    </div>
                  </div>

                  <div nz-row [nzGutter]="24">
                    <div nz-col [nzSpan]="8">
                      <nz-form-item>
                        <nz-form-label>Source</nz-form-label>
                        <nz-form-control>
                          <nz-input-group>
                            <label formControlName="source_gsis" nz-checkbox [(ngModel)]="checkedSourceGSIS" style="font-weight: 500;">GSIS</label> 
                            <label formControlName="source_sss" nz-checkbox [(ngModel)]="checkedSourceSSS" style="font-weight: 500;">SSS</label> 
                            <label formControlName="source_afpslai" nz-checkbox [(ngModel)]="checkedSourceAFPSLAI" style="font-weight: 500;">AFPSLAI</label> 
                            <label (ngModelChange)="checkOtherSourceBox($event)" formControlName="source_others" nz-checkbox [(ngModel)]="checkedSourceOthers" style="font-weight: 500;">Others</label> 
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>
                    </div>

                    <div nz-col [nzSpan]="8" *ngIf="specifyOtherSourceHide">
                      <nz-form-item>
                        <nz-form-control nzErrorTip="Please specify others!">
                          <p class="label">Specify Other Source :</p>
                          <nz-input-group>
                            <input formControlName="specify_other_source" nz-input placeholder="what source">
                          </nz-input-group>phonehui
                        </nz-form-control>
                      </nz-form-item>
                    </div>
                  </div>

                  <div nz-row [nzGutter]="24">
                    <div nz-col [nzSpan]="8">
                      <nz-form-item>
                        <nz-form-control>
                          <nz-input-group>
                            <label (ngModelChange)="checkedSourceIncome($event)" formControlName="permanent_source" nz-checkbox [(ngModel)]="checkedPermanentSource" style="font-weight: 500;">Has permanent source of income?</label> 
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>
                    </div>

                    <div nz-col [nzSpan]="8" *ngIf="specifySourceIncomeHide">
                      <nz-form-item>
                        <nz-form-control nzErrorTip="Please input source!">
                          <p class="label">If yes, from what source? :</p>
                          <nz-input-group>
                            <input formControlName="what_source" nz-input placeholder="what source">
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>
                    </div>
                  </div>

                  <div nz-row [nzGutter]="24">
                    <div nz-col [nzSpan]="8">
                      <nz-form-item>
                        <nz-form-control>
                          <nz-input-group>
                            <label (ngModelChange)="checkedFamilySupportBox($event)" formControlName="family_support" nz-checkbox [(ngModel)]="checkedFamilySupport" style="font-weight: 500;">Regular Support from Family?</label> 
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>
                    </div>

                    <div nz-col [nzSpan]="8" *ngIf="familySupportHide">
                      <nz-form-item>
                        <nz-form-control nzErrorTip="Please input source type!">
                          <p class="label">Type of Support? :</p>
                          <nz-input-group>
                            <input formControlName="support_type" nz-input placeholder="source type">
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>
                    </div>

                    <div nz-col [nzSpan]="8" *ngIf="familySupportHide">
                      <nz-form-item>
                        <nz-form-control nzErrorTip="Please input how much!">
                          <p class="label">How much? :</p>
                          <nz-input-group>
                            <input formControlName="how_much" localeCurrencyInput [allowNegative]="false" [currencyCode]="' '" nz-input placeholder="how much">
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>
                    </div>
                  </div>

                  <div nz-row [nzGutter]="24">
                    <div nz-col [nzSpan]="8"></div>
                    <div nz-col [nzSpan]="8" *ngIf="familySupportHide">
                      <nz-form-item>
                        <nz-form-control nzErrorTip="Please input how much!">
                          <p class="label">How often? :</p>
                          <nz-input-group>
                            <nz-select formControlName="how_often" nzPlaceHolder="Select" style="width: 100%;">
                              <nz-option nzValue="Always" nzLabel="Always"></nz-option>
                              <nz-option nzValue="Sometimes" nzLabel="Sometimes"></nz-option>
                              <nz-option nzValue="Rarely" nzLabel="Rarely"></nz-option>
                              <nz-option nzValue="Every week" nzLabel="Every week"></nz-option>
                              <nz-option nzValue="Every month" nzLabel="Every month"></nz-option>
                            </nz-select>
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>
                    </div>
                    <div nz-col [nzSpan]="8" *ngIf="familySupportHide">
                      <nz-form-item>
                        <nz-form-control nzErrorTip="Please input in kind!">
                          <p class="label">In kind (specify) :</p>
                          <nz-input-group>
                            <input formControlName="in_kind" nz-input placeholder="specify">
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>
                    </div>
                  </div>

                </nz-card>

                <div nz-row [nzGutter]="24">
                  <div nz-col [nzSpan]="12">
                    <nz-card nzType="inner" nzTitle="IV. Health Condition" style="margin-top: 10px;  height: 96%;">
                      <div nz-row [nzGutter]="24">
                        <div nz-col [nzSpan]="24">
                          <nz-form-item>
                            <nz-form-control nzErrorTip="Please input condition!">
                              <p class="label">Condition / Illness :</p>
                              <nz-input-group>
                                <textarea rows="1" formControlName="condition" nz-input placeholder="specify condition/illness"></textarea>
                              </nz-input-group>
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                      </div>
    
                      <div nz-row [nzGutter]="24">
                        <div nz-col [nzSpan]="24">
                          <nz-form-item>
                            <nz-form-control>
                              <nz-input-group>
                                <label (ngModelChange)="checkedWithMaintenanceBox($event)" formControlName="with_maintenance" nz-checkbox [(ngModel)]="checkedWithMaintenance" style="font-weight: 500;">With Maintenance</label> 
                              </nz-input-group>
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                      </div>
    
                      <div nz-row [nzGutter]="24">
                        <div nz-col [nzSpan]="24">
                          <nz-form-item>
                            <nz-form-control nzErrorTip="Please input specify!">
                              <p *ngIf="withMaintenanceHide" class="label">If yes, please specify :</p>
                              <nz-input-group *ngIf="withMaintenanceHide">
                                <input formControlName="specify_maintenance" nz-input placeholder="Specify maintenance">
                              </nz-input-group>
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                      </div>
                    </nz-card>
                  </div>

                  <div nz-col [nzSpan]="12">
                    <nz-card nzType="inner" nzTitle="V. Assessment" style="margin-top: 10px; height: 96%;">
                      <div nz-row [nzGutter]="24">
                        <div nz-col [nzSpan]="24">
                          <nz-form-item>
                            <nz-form-control nzErrorTip="Please input condition!">
                              <p class="label">Assessment Note :</p>
                              <nz-input-group>
                                <textarea rows="6" formControlName="assessment_description" nz-input placeholder="Assessment"></textarea>
                              </nz-input-group>
                            </nz-form-control>
                          </nz-form-item>
                        </div>
                      </div>
                    </nz-card>
                  </div>
                </div>

                
                
              </div>
            </div>
            
          </nz-tab>
        </nz-tabset>

      </form>
    </div>
  </nz-spin>
</nz-spin>
<ng-template #TransactionForm>
  <i nz-icon nzType="container" nzTheme="outline"></i>
  Transaction Form
</ng-template>
<ng-template #Details>
  <i nz-icon nzType="snippets" nzTheme="outline"></i>
  Transaction Details
</ng-template>